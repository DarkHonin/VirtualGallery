import{_ as f,a as x}from"./Base.button.vue_vue_type_style_index_0_lang-BtRJV3p3.js";import{d as _,o as s,e as k,w as h,g as m,t as U,x as $,b as I,c as B,a as v,h as c,q as C,l as F,k as t,_ as V,y as j,f as S,j as A,v as N}from"./index-BIPO-Dql.js";const D=["placeholder","onInput"],R=_({__name:"Textarea.input",props:{type:{},required:{type:Boolean},label:{},placeholder:{},modelValue:{type:[String,Number,Boolean,null,Object,Array]}},emits:["update:modelValue"],setup(g,{emit:e}){const n=g,r=e;return(l,p)=>(s(),k(f,$(n,{type:"textarea","onUpdate:modelValue":p[0]||(p[0]=i=>r("update:modelValue",i))}),{control:h(({handleUpdate:i})=>[m("textarea",{placeholder:l.placeholder,class:"w-full resize-none min-h-40 p-1",onInput:d=>i(d)},U(l.modelValue),41,D)]),_:1},16))}}),q={key:0,class:"grow border-dashed border border-primary-active hover:border-primary-hover text-primary-active hover:text-primary-hover w-full h-40 flex cursor-pointer"},L=["src"],O=_({__name:"Image.input",props:{type:{default:()=>"image"},modelValue:{},required:{type:Boolean},label:{},placeholder:{}},emits:["uploadFile"],setup(g,{emit:e}){const n=g,r=e,l=I(),p=d=>{const a=d.target.files;if(!a)return l.value=void 0;l.value=a[0],r("uploadFile",l.value)},i=B(()=>(l.value?URL.createObjectURL(l.value):void 0)??n.modelValue);return(d,w)=>(s(),k(f,$(n,{class:"h-full flex-col flex"}),{control:h(({handleUpdate:a})=>[l.value||d.modelValue?(s(),v("img",{key:1,src:i.value,class:"cursor-pointer"},null,8,L)):(s(),v("div",q,[c(C,{name:"add",class:"m-auto"})])),m("input",{type:"file",accept:"Image/png;Image/jpeg",hidden:"",onChange:p},null,32)]),_:1},16))}}),P={key:0,class:"px-2 w-full flex flex-col justify-center items-center h-full"},W=m("h2",null," Could not find artwork ",-1),z={key:1,class:"px-2 w-full grid-cols-6 grid gap-2"},E={class:"flex col-span-full gap-2"},T={key:1,class:"ml-auto items-center flex gap-2"},G={class:"col-span-3"},K=_({__name:"Artwork.view",setup(g){const e=F(),n=j(),r=I(),l=S(),p=()=>{(r.value?e.saveArtworkFile(r.value):e.saveArtworkDetails()).then(a=>{l.push({name:"artwork_view",params:{artworkId:a.id}})})},i=B(()=>n.params.artworkId!=="new"&&parseInt(n.params.artworkId)!==e.artwork.id),d=()=>{e.deleteArtwork().then(()=>l.push({name:"artworks"}))},w=a=>{if(!(a!=null&&a.resource))return;const{data:o}=N.storage.from("gallery_photos").getPublicUrl(a.resource);return o.publicUrl};return(a,o)=>(s(),k(V,{class:"m-auto",loading:t(e).isActionActive("loadingArtwork")},{default:h(()=>{var b,y;return[i.value?(s(),v("div",P,[c(C,{name:"error",class:"text-button-negative"}),W])):(s(),v("div",z,[m("div",E,[c(x,{color:"positive",label:"Save",disabled:!r.value&&!((b=t(e).artwork)!=null&&b.resource),loading:t(e).isActing,onClick:o[0]||(o[0]=u=>p())},null,8,["disabled","loading"]),t(e).artwork.id?(s(),k(x,{key:0,color:"negative",label:"Delete",disabled:!r.value&&!((y=t(e).artwork)!=null&&y.resource),loading:t(e).isActing,onClick:o[1]||(o[1]=u=>d())},null,8,["disabled","loading"])):A("",!0),t(e).isActing?(s(),v("label",T,[m("p",null,U(t(e).activeActions.join(" - ")),1),c(V,{loading:!0})])):A("",!0)]),c(O,{label:"Upload Artwork",class:"col-span-3",modelValue:w(t(e).artwork),onUploadFile:o[2]||(o[2]=u=>r.value=u)},null,8,["modelValue"]),m("div",G,[c(f,{label:"Artwork title",type:"text",modelValue:t(e).artwork.title,"onUpdate:modelValue":o[3]||(o[3]=u=>t(e).artwork.title=u),placeholder:"What should it be called?"},null,8,["modelValue"]),c(R,{modelValue:t(e).artwork.description,"onUpdate:modelValue":o[4]||(o[4]=u=>t(e).artwork.description=u),class:"h-80",label:"Description",placeholder:"What were you thinking?"},null,8,["modelValue"])])]))]}),_:1},8,["loading"]))}});export{K as default};
