import{_ as C,a as w}from"./Base.button.vue_vue_type_style_index_0_lang-BtRJV3p3.js";import{d as y,A as x,c as b,o as a,e as p,w as k,g as r,r as z,t as _,B as D,C as N,h as m,q as I,K as P,a as c,D as R,F as U,x as S,p as j,s as q,E as F,n as E,k as s,z as K,l as L,G,_ as $,y as M,f as W,j as h}from"./index-BIPO-Dql.js";const H={class:"bg-label-primary border-r-2 flex relative",tabindex:"0"},J={class:"options absolute top-full left-0 bg-primary max-h-56 overflow-y-auto w-full"},O=["onClick"],Q=y({__name:"Select.input",props:{type:{default:()=>"select"},modelValue:{},item_value:{},item_label:{},options:{},multiple:{type:Boolean},required:{type:Boolean},label:{},placeholder:{}},emits:["update:modelValue"],setup(f,{emit:o}){const l=f,n=o,u=x(),v=t=>{console.log(t),l.multiple?l.modelValue?typeof l.modelValue!="string"&&l.modelValue.length&&n("update:modelValue",[...l.modelValue,l.item_value?t[l.item_value]:t]):n("update:modelValue",[l.item_value?t[l.item_value]:t]):n("update:modelValue",l.item_value?t[l.item_value]:t)},g=t=>{if(l.multiple){if(!l.modelValue)return n("update:modelValue",[]);if(typeof l.modelValue!="string"&&l.modelValue.length)return n("update:modelValue",l.modelValue.filter(i=>i!==t))}n("update:modelValue",void 0)},d=b(()=>l.modelValue?l.multiple&&typeof l.modelValue!="string"&&typeof l.modelValue.length<"u"?l.modelValue:[l.modelValue]:[]);return(t,i)=>(a(),p(C,S(l,{class:"select-input"}),{control:k(({})=>[r("label",H,[z(t.$slots,"display",D(N({item:t.options.filter(e=>d.value.includes(t.item_value?e[t.item_value]:e))})),()=>[r("label",null,_(t.options.filter(e=>d.value.includes(t.item_value?e[t.item_value]:e))),1)]),m(I,{name:"chevron_left",class:"ml-auto z-10"}),(a(),p(P,null,[r("label",J,[(a(!0),c(U,null,R(t.options,(e,V)=>(a(),c("div",{key:V,class:j(["hover:bg-primary-hover p-2 cursor-pointer options",{active:d.value.includes(t.item_value?e[t.item_value]:e)}]),tabindex:"0"},[u.item?(a(),p(q(u.item),S({key:0,ref_for:!0},{item:e,addItem:v,removeItem:g,isSelected:d.value.includes(t.item_value?e[t.item_value]:e)}),null,16)):(a(),c("div",{key:1,onClick:B=>d.value.includes(e)?g(e):v(e)},_(e),9,O))],2))),128))])],1024))])]),_:3},16))}}),T={class:"artwork-list-item flex w-full grow gap-2"},X={class:"flex-1 w-full"},A=y({__name:"Artwork.listItem",props:{item:{}},setup(f){const o=f,l=b(()=>o.item),{imagePublicUrl:n}=F(l);return(u,v)=>(a(),c("div",T,[r("div",{style:E({backgroundImage:`URL(${s(n)})`}),class:"aspect-square h-32 bg-cover bg-center"},null,4),r("div",X,[r("label",null,_(u.item.title),1),r("p",null,_(u.item.description),1)])]))}}),Y={key:0,class:"px-2 w-full flex flex-col justify-center items-center h-full"},Z=r("h2",null," Could not find artwork ",-1),ee={key:1,class:"px-2 w-full grid-cols-6 grid gap-2"},le={class:"flex col-span-full gap-2"},te={key:1,class:"ml-auto items-center flex gap-2"},oe={class:"col-span-3"},ne=y({__name:"Slot.view",setup(f){const o=K(),l=M(),n=L(),u=W(),v=()=>{o.saveSlotDetails().then(t=>{u.push({name:"slot_view",params:{slotId:t.id}})})},g=b(()=>l.params.slotId!=="new"&&parseInt(l.params.slotId)!==o.slot.id);G(()=>{n.preflight()});const d=()=>{o.deleteSlot().then(()=>u.push({name:"slots"}))};return(t,i)=>(a(),p($,{class:"m-auto",loading:s(o).isActionActive("loadingSlot")},{default:k(()=>[g.value?(a(),c("div",Y,[m(I,{name:"error",class:"text-button-negative"}),Z])):(a(),c("div",ee,[r("div",le,[m(w,{color:"positive",label:"Save",loading:s(o).isActing,onClick:i[0]||(i[0]=e=>v())},null,8,["loading"]),s(o).slot.id?(a(),p(w,{key:0,color:"negative",label:"Delete",disabled:!s(o).slot.slot_name||!s(o).slot,loading:s(o).isActing,onClick:i[1]||(i[1]=e=>d())},null,8,["disabled","loading"])):h("",!0),s(o).isActing?(a(),c("label",te,[r("p",null,_(s(o).activeActions.join(" - ")),1),m($,{loading:!0})])):h("",!0)]),r("div",oe,[m(C,{label:"Slot title",type:"text",modelValue:s(o).slot.slot_name,"onUpdate:modelValue":i[2]||(i[2]=e=>s(o).slot.slot_name=e),placeholder:"What should it be called?"},null,8,["modelValue"]),m(Q,{modelValue:s(o).slot.artwork,"onUpdate:modelValue":i[3]||(i[3]=e=>s(o).slot.artwork=e),item_value:"id",options:s(n).artworks,placeholder:"Select artwork",label:"Selected Artwork"},{display:k(({item:e})=>[e&&e[0]?(a(),p(A,{key:0,item:e==null?void 0:e[0]},null,8,["item"])):h("",!0)]),item:k(({item:e,addItem:V})=>[m(A,{item:e,onClick:B=>V(e)},null,8,["item","onClick"])]),_:1},8,["modelValue","options"])])]))]),_:1},8,["loading"]))}});export{ne as default};
